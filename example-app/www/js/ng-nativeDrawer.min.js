angular.module("nativeDrawer",[]).factory("$nativeDrawer",[function(){var t,e,n,i,o,a,s,r,l,d,m,p={open:!1,plusActive:!1,holdingDrawerPosition:null,options:{maxWidth:300,topBarHeight:0,speed:.2,animation:"ease-out",modifyViewContent:!1,useActionButton:!1},show:function(){o.style.transition="all "+p.options.speed+"s "+p.options.animation,o.style.webkitTransform="translate(0,0)translateZ(0)",o.style.msTransform=o.style.MozTransform=o.style.OTransform="translateX(0)",o.style.boxShadow="0 0 10px rgba(0,0,0,0.4)",s.style.transition="all "+p.options.speed+"s "+p.options.animation,s.style.visibility="visible",s.style.opacity="1",l.classList.add("active"),p.open=!0},hide:function(){o.style.transition="all "+p.options.speed+"s "+p.options.animation,o.style.webkitTransform="translate(-"+p.maxWidth+"px,0)translateZ(0)",o.style.msTransform=o.style.MozTransform=o.style.OTransform="translateX(-"+p.maxWidth+"px)",o.style.boxShadow="none",s.style.transition="all "+p.options.speed+"s "+p.options.animation,s.style.visibility="hidden",s.style.opacity="0",l.classList.remove("active"),p.open=!1},move:function(t,e){p.direction="panleft"===t.type?"left":"right";var n=t.center.x-p.maxWidth;e&&(p.holdingDrawerPosition=p.holdingDrawerPosition?p.holdingDrawerPosition:n,n+=Math.abs(p.holdingDrawerPosition)),n=0>n?n:0;var i=p.maxWidth-Math.abs(n),a=(i/(p.maxWidth/100)/100).toFixed(2);a=1>a?a:1,s.style.visibility="visible",s.style.opacity=a,o.style.transition="none",o.style.webkitTransform="translate("+n+"px,0)translateZ(0)",o.style.msTransform=o.style.MozTransform=o.style.OTransform="translateX("+n+"px)",o.style.boxShadow="0 0 10px rgba(0,0,0,0.4)",p.open=!0,t.isFinal?("left"===p.direction?p.hide():p.show(),p.endTrue=!1,p.holdingDrawerPosition=null):p.endTrue=!0},touchEnd:function(t){t.addEventListener("touchend",function(t){var e=t.changedTouches[0],n=e.clientX>p.maxWidth/2,i="left"===p.direction,o="right"===p.direction,a=p.endTrue;a&&(n&&i||n&&o?p.show():(!n&&i||!n&&o)&&p.hide()),p.direction=!1,p.endTrue=!1,p.holdingDrawerPosition=null,t.preventDefault()},!1)},init:function(c){var h=p.merge_options(p.options,c);p.options=h,console.log("init drawer"),t=document.getElementById("swipe-stripe"),e=new Hammer(t),n=document.getElementById("cont"),i=new Hammer(n),o=document.getElementById("drawer"),a=new Hammer(o),s=document.getElementById("drawer-dimm"),r=new Hammer(s),l=document.getElementById("nav-toggle"),d=Math.max(document.documentElement.clientWidth,window.innerWidth||0),deviceH=Math.max(document.documentElement.clientHeight,window.innerHeight||0),p.options.modifyViewContent&&(m=document.getElementById("view-content"),m.style.height=deviceH-p.options.topBarHeight+"px",m.style.top=p.options.topBarHeight+"px"),p.maxWidth=p.options.maxWidth>d-56?d-56:p.options.maxWidth,o.style.width=p.maxWidth+"px",o.style.webkitTransform="translate(-"+p.maxWidth+"px,0)translateZ(0)",o.style.msTransform=o.style.MozTransform=o.style.OTransform="translateX(-"+p.maxWidth+"px)",window.onresize=function(){d=Math.max(document.documentElement.clientWidth,window.innerWidth||0),deviceH=Math.max(document.documentElement.clientHeight,window.innerHeight||0),p.options.modifyViewContent&&(m.style.height=deviceH-p.options.topBarHeight+"px"),p.maxWidth=p.options.maxWidth>d-56?d-56:p.options.maxWidth,o.style.width=p.maxWidth+"px",p.open||(o.style.webkitTransform="translate(-"+p.maxWidth+"px,0)translateZ(0)",o.style.msTransform=o.style.MozTransform=o.style.OTransform="translateX(-"+p.maxWidth+"px)")},a.on("panleft panright",function(t){p.open&&p.move(t,!0)}),e.on("panright panleft",function(t){p.move(t)}),r.on("panleft panright",function(t){p.open&&p.move(t)}),p.touchEnd(t),p.touchEnd(o),p.touchEnd(s)},togglePlus:function(t){if(p.options.useActionButton){var e=document.getElementById("add-panel-switch"),n=document.getElementById("drawer-dimm");p.plusActive||t?(p.open||(n.style.visibility="hidden",n.style.opacity="0"),p.plusActive=!1,e.classList.remove("active")):(p.plusActive=!0,e.classList.add("active"),n.style.visibility="visible",n.style.opacity="1")}},merge_options:function(t,e){var n={};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];return n}};return p}]);