angular.module("nativeDrawer",[]).factory("$nativeDrawer",[function(){var t,e,o,n,r,i,a,s,l,d,m={open:!1,plusActive:!1,holdingDrawerPosition:null,options:{maxWidth:300,topBarHeight:0,speed:.2,animation:"ease-out",modifyViewContent:!1,useActionButton:!1},show:function(){r.style.transition="all "+m.options.speed+"s "+m.options.animation,r.style.webkitTransform="translate(0,0)translateZ(0)",r.style.msTransform=r.style.MozTransform=r.style.OTransform="translateX(0)",r.style.boxShadow="0 0 10px rgba(0,0,0,0.4)",a.style.transition="all "+m.options.speed+"s "+m.options.animation,a.style.visibility="visible",a.style.opacity="1",m.open=!0,m.toggleBurger(!0)},hide:function(){r.style.transition="all "+m.options.speed+"s "+m.options.animation,r.style.webkitTransform="translate(-"+m.maxWidth+"px,0)translateZ(0)",r.style.msTransform=r.style.MozTransform=r.style.OTransform="translateX(-"+m.maxWidth+"px)",r.style.boxShadow="none",a.style.transition="all "+m.options.speed+"s "+m.options.animation,a.style.visibility="hidden",a.style.opacity="0",m.open=!1,m.toggleBurger(!1)},toggle:function(){m.open?m.hide():m.show()},move:function(t,e){m.direction="panleft"===t.type?"left":"right";var o=t.center.x-m.maxWidth;e&&(m.holdingDrawerPosition=m.holdingDrawerPosition?m.holdingDrawerPosition:o,o+=Math.abs(m.holdingDrawerPosition)),o=0>o?o:0;var n=m.maxWidth-Math.abs(o),i=(n/(m.maxWidth/100)/100).toFixed(2);i=1>i?i:1,m.animateBurger(o,i),a.style.visibility="visible",a.style.opacity=i,r.style.transition="none",r.style.webkitTransform="translate("+o+"px,0)translateZ(0)",r.style.msTransform=r.style.MozTransform=r.style.OTransform="translateX("+o+"px)",r.style.boxShadow="0 0 10px rgba(0,0,0,0.4)",m.open=!0,t.isFinal?("left"===m.direction?m.hide():m.show(),m.endTrue=!1,m.holdingDrawerPosition=null):m.endTrue=!0},animateBurger:function(t){var e=m.maxWidth,o=e-Math.abs(t),n=Math.floor(100/e*o);if(n>0){document.querySelector("#burger").style.transition="none",document.querySelector("#burger #top").style.transition="none",document.querySelector("#burger #bottom").style.transition="none",console.log(n);var r=18,i=r-Math.floor(.06*n),a=Math.floor(1.8*n),s="translate3d(0px, 0px, 0) rotate3d( 0, 0, 1, "+a+"deg )";document.querySelector("#burger").style.transform=s;var l=Math.floor(.45*n),d=Math.floor(.3*n),u=Math.floor(.09*n);u=9>u?u:9;var c="translate3d("+d+"px, -"+u+"px, 0) rotate3d( 0, 0, 1, "+l+"deg )";document.querySelector("#burger #top").style.transform=c,document.querySelector("#burger #top").setAttribute("width",i);var p=Math.floor(.09*n),y=Math.floor(.26*n);y=26>y?y:26;var h="translate3d(-"+p+"px, "+y+"px, 0) rotate3d( 0, 0, 1, -"+l+"deg )";document.querySelector("#burger #bottom").style.transform=h,document.querySelector("#burger #bottom").setAttribute("width",i)}},toggleBurger:function(t){if(document.querySelector("#burger").style.transition="all 0.3s ease",document.querySelector("#burger #top").style.transition="all 0.3s ease",document.querySelector("#burger #bottom").style.transition="all 0.3s ease",t){var e="translate3d(30px, -9px, 0) rotate3d( 0, 0, 1, 45deg )";document.querySelector("#burger #top").style.transform=e,document.querySelector("#burger #top").setAttribute("width",12);var o="translate3d(-9px, 26px, 0) rotate3d( 0, 0, 1, -45deg )";document.querySelector("#burger #bottom").style.transform=o,document.querySelector("#burger #bottom").setAttribute("width",12);var n="translate3d(0px, 0px, 0) rotate3d( 0, 0, 1, 180deg )";document.querySelector("#burger").style.transform=n}else{var e="translate3d(0, 0, 0) rotate3d( 0, 0, 1, 0deg )";document.querySelector("#burger #top").style.transform=e,document.querySelector("#burger #top").setAttribute("width",18);var o="translate3d(0, 0, 0) rotate3d( 0, 0, 1, 0deg )";document.querySelector("#burger #bottom").style.transform=o,document.querySelector("#burger #bottom").setAttribute("width",18);var n="translate3d(0px, 0px, 0) rotate3d( 0, 0, 1, 0deg )";document.querySelector("#burger").style.transform=n}},burgerTemplate:function(){var t=document.getElementsByTagName("nlmd-burger");t[0].innerHTML='<svg version="1.1" id="burger" class="menu-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="56px" height="56px" viewBox="0 0 56 56" enable-background="new 0 0 56 56" xml:space="preserve"><rect id="top" x="19" y="20" fill="#fff" width="18" height="2"/><rect id="center" x="19" y="26" fill="#fff" width="18" height="2"/><rect id="bottom" x="19" y="32" fill="#fff" width="18" height="2"/></svg>'},touchEnd:function(t){t.addEventListener("touchend",function(t){var e=t.changedTouches[0],o=e.clientX>m.maxWidth/2,n="left"===m.direction,r="right"===m.direction,i=m.endTrue;i&&(o&&n||o&&r?m.show():(!o&&n||!o&&r)&&m.hide()),m.direction=!1,m.endTrue=!1,m.holdingDrawerPosition=null,t.preventDefault()},!1)},init:function(u){var c=m.merge_options(m.options,u);m.options=c,console.log(m.options),m.burgerTemplate(),console.log("init drawer"),t=document.getElementById("swipe-stripe"),e=new Hammer(t),o=document.getElementById("cont"),n=new Hammer(o),r=document.getElementById("drawer"),i=new Hammer(r),a=document.getElementById("drawer-dimm"),s=new Hammer(a),l=Math.max(document.documentElement.clientWidth,window.innerWidth||0),deviceH=Math.max(document.documentElement.clientHeight,window.innerHeight||0),m.options.modifyViewContent&&(d=document.getElementById("view-content"),d.style.position="absolute",d.style.width=l+"px",d.style.height=deviceH-m.options.topBarHeight+"px",d.style.top=m.options.topBarHeight+"px"),m.maxWidth=m.options.maxWidth>l-56?l-56:m.options.maxWidth,r.style.width=m.maxWidth+"px",r.style.webkitTransform="translate(-"+m.maxWidth+"px,0)translateZ(0)",r.style.msTransform=r.style.MozTransform=r.style.OTransform="translateX(-"+m.maxWidth+"px)",window.onresize=function(){l=Math.max(document.documentElement.clientWidth,window.innerWidth||0),deviceH=Math.max(document.documentElement.clientHeight,window.innerHeight||0),m.options.modifyViewContent&&(d.style.position="absolute",d.style.width=l+"px",d.style.height=deviceH-m.options.topBarHeight+"px"),m.maxWidth=m.options.maxWidth>l-56?l-56:m.options.maxWidth,r.style.width=m.maxWidth+"px",m.open||(r.style.webkitTransform="translate(-"+m.maxWidth+"px,0)translateZ(0)",r.style.msTransform=r.style.MozTransform=r.style.OTransform="translateX(-"+m.maxWidth+"px)")},i.on("panleft panright",function(t){m.open&&m.move(t,!0)}),e.on("panright panleft",function(t){m.move(t)}),s.on("panleft panright",function(t){m.open&&m.move(t)}),m.touchEnd(t),m.touchEnd(r),m.touchEnd(a)},togglePlus:function(t){if(m.options.useActionButton){var e=document.getElementById("add-panel-switch"),o=document.getElementById("drawer-dimm");m.plusActive||t?(m.open||(o.style.visibility="hidden",o.style.opacity="0"),m.plusActive=!1,e.classList.remove("active")):(m.plusActive=!0,e.classList.add("active"),o.style.visibility="visible",o.style.opacity="1")}},merge_options:function(t,e){var o={};for(var n in t)o[n]=t[n];for(var n in e)o[n]=e[n];return o}};return m}]);