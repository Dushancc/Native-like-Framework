angular.module("nativeDrawer",[]).factory("$nativeDrawer",[function(){var t,e,n,o,s,a,i,r,l,d,m,p,y,f={open:!1,plusActive:!1,holdingDrawerPosition:null,options:{maxWidth:300,topBarHeight:0,speed:.2,animation:"ease-out",modifyViewContent:!1,useActionButton:!1},show:function(){s.style.transition="all "+f.options.speed+"s "+f.options.animation,s.style.webkitTransform="translate(0,0)translateZ(0)",s.style.msTransform=s.style.MozTransform=s.style.OTransform="translateX(0)",i.style.transition="all "+f.options.speed+"s "+f.options.animation,i.style.visibility="visible",i.style.opacity="1",f.open=!0,f.toggleBurger(!0)},hide:function(){s.style.transition="all "+f.options.speed+"s "+f.options.animation,s.style.webkitTransform="translate(-"+f.maxWidth+"px,0)translateZ(0)",s.style.msTransform=s.style.MozTransform=s.style.OTransform="translateX(-"+f.maxWidth+"px)",i.style.transition="all "+f.options.speed+"s "+f.options.animation,i.style.visibility="hidden",i.style.opacity="0",f.open=!1,f.toggleBurger(!1)},toggle:function(){f.open?f.hide():f.show()},move:function(t,e){f.direction="panleft"===t.type?"left":"right";var n=t.center.x-f.maxWidth;e&&(f.holdingDrawerPosition=f.holdingDrawerPosition?f.holdingDrawerPosition:n,n+=Math.abs(f.holdingDrawerPosition)),n=0>n?n:0;var o=f.maxWidth-Math.abs(n),a=(o/(f.maxWidth/100)/100).toFixed(2);a=1>a?a:1,f.animateBurger(n),i.style.visibility="visible",i.style.opacity=a,i.style.webkitTransform="translate(0,0) translateZ(0)",s.style.transition="none",s.style.webkitTransform="translate("+n+"px,0)translateZ(0)",s.style.msTransform=s.style.MozTransform=s.style.OTransform="translateX("+n+"px)",f.open=!0,t.isFinal?("left"===f.direction?f.hide():f.show(),f.endTrue=!1,f.holdingDrawerPosition=null):f.endTrue=!0},animateBurger:function(t){var e=f.maxWidth,n=e-Math.abs(t),o=Math.floor(100/e*n);if(o>0){m.style.transition="none",p.style.transition="none",y.style.transition="none";var a=22,i=a-Math.floor(.06*o),r=Math.floor(.45*o),l=x_pos_bottom=Math.floor(.1*o),d=Math.floor(.01*o);d=y_pos_bottom=1>d?d:1;var h=Math.floor(1.8*o);"left"===f.direction&&100>o&&(h=180+(180-h)),m.style.transform="translate3d(0px, 0px, 0) rotate3d(0,0,1,"+h+"deg)",m.style.webkitTransform="rotate("+h+"deg)",m.style.msTransform=s.style.MozTransform=s.style.OTransform="rotate("+h+"deg)",p.style.transform="translate3d("+l+"px, "+d+"px, 0) rotate3d( 0, 0, 1, "+r+"deg )",p.style.webkitTransform="translate("+l+"px, "+d+"px) translateZ(0) rotate("+r+"deg)",p.style.msTransform=s.style.MozTransform=s.style.OTransform="rotate("+r+"deg)",p.style.width=i+"px",y.style.transform="translate3d("+x_pos_bottom+"px, -"+y_pos_bottom+"px, 0) rotate3d( 0, 0, 1, -"+r+"deg )",y.style.webkitTransform="translate("+x_pos_bottom+"px, -"+y_pos_bottom+"px) rotate(-"+r+"deg)",y.style.msTransform=s.style.MozTransform=s.style.OTransform="rotate(-"+r+"deg)",y.style.width=i+"px"}},toggleBurger:function(t){m.style.transition="all "+f.options.speed+"s "+f.options.animation,p.style.transition="all "+f.options.speed+"s "+f.options.animation,y.style.transition="all "+f.options.speed+"s "+f.options.animation,t?(p.style.width="16px",p.style.transform="translate3d(10px, 1px, 0) rotate3d( 0, 0, 1, 45deg )",p.style.webkitTransform="translate(10px, 1px) translateZ(0) rotate(45deg)",y.style.width="16px",y.style.transform="translate3d(10px, -1px, 0) rotate3d( 0, 0, 1, -45deg )",y.style.webkitTransform="translate(10px, -1px) translateZ(0) rotate(-45deg)",m.style.transform="translate3d(0px, 0px, 0) rotate3d( 0, 0, 1, 180deg )",m.style.webkitTransform="translate(0px, 0px) translateZ(0) rotate(180deg)"):(p.style.transform="translate3d(0, 0, 0) rotate3d( 0, 0, 1, 0deg )",p.style.webkitTransform="translate(0, 0) translateZ(0) rotate(0deg)",p.style.width="22px",y.style.width="22px",y.style.transform="translate3d(0, 0, 0) rotate3d( 0, 0, 1, 0deg )",y.style.webkitTransform="translate(0, 0) translateZ(0) rotate(0deg)",m.style.transform="translate3d(0px, 0px, 0) rotate3d( 0, 0, 1, 360deg )",m.style.webkitTransform="translate(0px, 0px) translateZ(0) rotate(360deg)");var e=1e3*f.options.speed;console.log(e),setTimeout(function(){m.style.transition="none",p.style.transition="none",y.style.transition="none",t||(m.style.transform="translate3d(0px, 0px, 0) rotate3d( 0, 0, 1, 0deg )",m.style.webkitTransform="translate(0px, 0px) translateZ(0) rotate(0deg)")},e)},touchEnd:function(t){t.addEventListener("touchend",function(t){var e=t.changedTouches[0],n=e.clientX>f.maxWidth/2,o="left"===f.direction,s="right"===f.direction,a=f.endTrue;a&&(n&&o||n&&s?f.show():(!n&&o||!n&&s)&&f.hide()),f.direction=!1,f.endTrue=!1,f.holdingDrawerPosition=null,t.preventDefault()},!1)},init:function(h){var c=f.merge_options(f.options,h);f.options=c,console.log(f.options),console.log("init drawer"),t=document.getElementById("swipe-stripe"),e=new Hammer(t),n=document.getElementById("cont"),o=new Hammer(n),s=document.getElementById("drawer"),a=new Hammer(s),i=document.getElementById("drawer-dimm"),r=new Hammer(i),m=document.getElementById("burger"),p=document.getElementById("burger-top"),y=document.getElementById("burger-bottom"),l=Math.max(document.documentElement.clientWidth,window.innerWidth||0),deviceH=Math.max(document.documentElement.clientHeight,window.innerHeight||0),f.options.modifyViewContent&&(d=document.getElementById("view-content"),d.style.position="absolute",d.style.width=l+"px",d.style.height=deviceH-f.options.topBarHeight+"px",d.style.top=f.options.topBarHeight+"px"),f.maxWidth=f.options.maxWidth>l-56?l-56:f.options.maxWidth,s.style.width=f.maxWidth+"px",s.style.webkitTransform="translate(-"+f.maxWidth+"px,0)translateZ(0)",s.style.msTransform=s.style.MozTransform=s.style.OTransform="translateX(-"+f.maxWidth+"px)",window.onresize=function(){l=Math.max(document.documentElement.clientWidth,window.innerWidth||0),deviceH=Math.max(document.documentElement.clientHeight,window.innerHeight||0),f.options.modifyViewContent&&(d.style.position="absolute",d.style.width=l+"px",d.style.height=deviceH-f.options.topBarHeight+"px"),f.maxWidth=f.options.maxWidth>l-56?l-56:f.options.maxWidth,s.style.width=f.maxWidth+"px",f.open||(s.style.webkitTransform="translate(-"+f.maxWidth+"px,0)translateZ(0)",s.style.msTransform=s.style.MozTransform=s.style.OTransform="translateX(-"+f.maxWidth+"px)")},a.on("panleft panright",function(t){f.open&&f.move(t,!0)}),r.on("panleft panright",function(t){f.open&&f.move(t)}),e.on("panright panleft",function(t){f.move(t)}),f.touchEnd(t),f.touchEnd(s),f.touchEnd(i)},togglePlus:function(t){if(f.options.useActionButton){var e=document.getElementById("add-panel-switch"),n=document.getElementById("drawer-dimm");f.plusActive||t?(f.open||(n.style.visibility="hidden",n.style.opacity="0"),f.plusActive=!1,e.classList.remove("active")):(f.plusActive=!0,e.classList.add("active"),n.style.visibility="visible",n.style.opacity="1")}},merge_options:function(t,e){var n={};for(var o in t)n[o]=t[o];for(var o in e)n[o]=e[o];return n}};return f}]);